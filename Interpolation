#include <iostream>
using namespace std;

class Interpolation {
private:
    double* x_nodes;  
    double* y_nodes;  
    int n;           

public:
    Interpolation(double* x, double* y, int node_count) {
        n = node_count - 1;  
        x_nodes = new double[node_count];
        y_nodes = new double[node_count];

        for (int i = 0; i <= n; i++) {
            x_nodes[i] = x[i];
            y_nodes[i] = y[i];
        }
    }
    ~Interpolation() {
        delete[] x_nodes;
        delete[] y_nodes;
    }
    // Ф(x) = yi + (yi+1 - yi)/(x+1 - xi) * (x - xi)   
    double interpolate(double x) {
        for (int i = 0; i < n; i++) {
            if (x >= x_nodes[i] && x <= x_nodes[i + 1]) {  
                double x_i = x_nodes[i];      // xi - левая граница 
                double x_i1 = x_nodes[i + 1];   // xi+1 - правая граница 
                double y_i = y_nodes[i];      // yi - значение в левой 
                double y_i1 = y_nodes[i + 1];   // yi+1 - значение в правой 
                                 
                double result = y_i + (y_i1 - y_i) / (x_i1 - x_i) * (x - x_i);

                return result;
            }            
        }
        return 0; 
    }

    void printInfo() {
        for (int i = 0; i <= n; i++) {
            cout << "  node " << i << ": (" << x_nodes[i] << ", " << y_nodes[i] << ")" << endl;
        }
    }
};

int main() {
    cout << " y = 2x + 1" << endl;
    double x[] = { 0.0, 1.0, 2.0, 3.0 };  
    double y[] = { 1.0, 3.0, 5.0, 7.0 };  
    int nodes = 4; 

    Interpolation lin_interp(x, y, nodes);
    lin_interp.printInfo();

    cout << "\nresult interpolation:" << endl;    
    for (double x = 0.0; x <= 3.0; x += 1.0) {
        double y = lin_interp.interpolate(x);
        cout << "F(" << x << ") = " << y << endl;
    }
    
    //cout << "\nEX2: proizvol func" << endl;
    //double x2[] = { 0.0, 2.0, 3.0, 5.0, 6.0 };
    //double y2[] = { 1.0, 4.0, 2.0, 5.0, 3.0 };
    //int nodes2 = 5;

    //Interpolation custom_interp(x2, y2, nodes2);
    //custom_interp.printInfo();

    //cout << "\nresult interpolation:" << endl;
    //for (double x = 0.0; x <= 6.0; x += 1.0) {
        //double y = custom_interp.interpolate(x);
        //cout << "F(" << x << ") = " << y << endl;
    //}

    return 0;
}
